<!DOCTYPE html>
<html>
    <head>
        <title>微信Js API Demo</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta name="viewport" content="width=device-width,height=device-height,inital-scale=1.0;">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <meta name="format-detection" content="telephone=no">
        <style type="text/css">
            p {
                padding: 5px 10px;
            }
        </style>
        <script type="text/javascript" src="weixinApi.js"></script>
    </head>
    <body>
        <p id="alert">这是一个测试页面！请直接分享到微信好友、朋友圈、腾讯微博看效果吧！</p>
        <p>大约1000ms,api完成事件绑定</p>
        <p>
            <button id="optionMenu">WeixinApi.hideOptionMenu</button>
        </p>
        
        <script type="text/javascript">
            var num = 0;
            var getWeixinApi = null;
            var obj = document.getElementById("alert");
            window.onload = function(){
                if( WeixinApi.openInWeixin() ){
                    getWeixinApi = window.setInterval(function(){
                        if( typeof window.WeixinJSBridge != "undefined"){
                            WeixinApi.hideOptionMenu();
                            window.clearInterval(getWeixinApi);
                        }else{
                            obj.innerHTML = num++;
                        }
                    }, 100);
                }
            };

            
        </script>
    </body>
</html>
